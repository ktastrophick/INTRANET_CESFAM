{% extends "base/base.html" %}
{% load static %}

{% block title %}Solicitudes — Intranet CESFAM{% endblock %}

{% block extra_css %}
    <style>
        .solicitud-container {
        background:white;
        border-radius:16px;
        box-shadow:0 2px 8px rgba(0,0,0,0.1);
        padding:2rem;
        max-width:800px;
        margin:0 auto;
        }
        h2{font-size:1.5rem;font-weight:700;margin-bottom:1rem;color:#1a1a1a;}
        .form-group{margin-bottom:1rem;}
        label{display:block;font-weight:500;margin-bottom:0.25rem;}
        input, select, textarea{
        width:100%;
        padding:0.6rem;
        border-radius:8px;
        border:1px solid #ccc;
        }
        button.submit-btn{
        background:#66b2ff;
        color:white;
        border:none;
        padding:0.6rem 1.2rem;
        border-radius:10px;
        cursor:pointer;
        font-weight:500;
        transition:background 0.3s;
        }
        button.submit-btn:hover{background:#4a9eea;}
        table{
        width:100%;
        border-collapse:collapse;
        margin-top:2rem;
        }
        th,td{
        padding:0.75rem;
        text-align:left;
        border-bottom:1px solid #eee;
        }
        th{
        background:#e3f2fd;
        font-weight:600;
        }
        td.status-Pendiente{color:#ff9800;font-weight:600;}
        td.status-Aprobado{color:#66bb6a;font-weight:600;}
        td.status-Rechazado{color:#dc2626;font-weight:600;}
        .filter-container{
        display:flex;
        gap:1rem;
        flex-wrap:wrap;
        margin-top:1rem;
        margin-bottom:1rem;
        }
        .filter-container input, .filter-container select{width:auto;flex:1;}
        @media(max-width:768px){.filter-container{flex-direction:column;}}
    </style>
    {% endblock %}

    {% block content %}
    <section class="page-content">
        <div class="solicitud-container">
        <h2>Solicitar Día Administrativo / Vacaciones</h2>
        
        <!-- Formulario -->
        <div class="form-group">
            <label for="solicitudTipo">Tipo de Solicitud:</label>
            <select id="solicitudTipo">
            <option value="Día Administrativo">Día Administrativo</option>
            <option value="Vacaciones">Vacaciones</option>
            </select>
        </div>

        <div class="form-group">
            <label for="fechaInicio">Fecha Inicio:</label>
            <input type="date" id="fechaInicio">
        </div>

        <div class="form-group">
            <label for="fechaFin">Fecha Fin:</label>
            <input type="date" id="fechaFin">
        </div>

        <div class="form-group">
            <label for="motivo">Motivo (opcional):</label>
            <textarea id="motivo" rows="2" placeholder="Describa el motivo..."></textarea>
        </div>

        <button class="submit-btn" id="btnEnviar">Enviar Solicitud</button>

        </div>
    </section>
    {% endblock %}

    {% block extra_js %}
    <script>
        function agregarSolicitud(){
        const tipo = document.getElementById("solicitudTipo").value;
        const inicio = document.getElementById("fechaInicio").value;
        const fin = document.getElementById("fechaFin").value;
        const motivo = document.getElementById("motivo").value;

        if(!inicio || !fin){
            alert("Seleccione fechas válidas.");
            return;
        }

        const tbody = document.querySelector("#solicitudesTable tbody");
        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${tipo}</td>
            <td>${inicio}</td>
            <td>${fin}</td>
            <td>${motivo || '-'}</td>
            <td class="status-Pendiente">Pendiente</td>
        `;
        tbody.appendChild(tr);

        // Limpieza
        document.getElementById("fechaInicio").value = "";
        document.getElementById("fechaFin").value = "";
        document.getElementById("motivo").value = "";
        }

        document.addEventListener('DOMContentLoaded', ()=>{
        document.getElementById("btnEnviar").addEventListener("click", agregarSolicitud);
        });
    </script>
{% endblock %}
